<!doctype html>
<!-- 
  03-index.html — Structure AVANT l'étape 6 (pas de barre d'outils/panneau latéral)
  -------------------------------------------------------------------------------
  - Étapes incluses : 1 (carte) + 2 (zoom custom + échelle) + 3 (coordonnées) + 4 (recherche BAN) + 5 (auth Supabase)
  - Tout le style est dans 03-styles.css ; toute la logique est dans 03-app.js ; la config (URL/clé Supabase) dans 03-config.js
  - Chaque section HTML est minimaliste et commentée. Rien n'est supprimé ultérieurement : on commente si on change.
-->
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Projet Carto Amélie — Carte</title>

  <!-- Leaflet CSS (version stable) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <!-- Styles de l'application (séparés pour éviter les limites de taille) -->
  <link rel="stylesheet" href="03-styles.css" />
</head>
<body>
  <!-- Conteneur global de l’application -->
  <div id="app">
    <!-- Carte Leaflet -->
    <div id="map" aria-label="Carte interactive"></div>

    <!-- Panneau connexion (Étape 5) -->
    <div class="panel-login" id="panel-login">
      <form id="login-form" autocomplete="off">
        <!-- Titre/labels masqués pour coller à la maquette (placeholders utilisés) -->
        <!-- <h3>Connexion</h3> -->
        <!-- <label for="login-email">Email</label> -->
        <input id="login-email" type="email" required placeholder="identifiant" />
        <!-- <label for="login-password">Mot de passe</label> -->
        <input id="login-password" type="password" required placeholder="mot de passe" />
        <div class="login-actions">
          <button id="btn-login" type="submit" class="btn-primary">connexion</button>
          <button id="btn-logout" type="button" class="btn-primary" style="display:none;">déconnexion</button>
        </div>
        <p id="login-error" class="error" aria-live="polite" style="display:none;"></p>
        <p id="login-status" class="help-text">Connectez vous pour accéder aux données</p>
      </form>
    </div>

    <!-- Recherche d’adresse BAN (Étape 4) -->
    <div class="panel-search" id="panel-search">
      <form id="search-form" role="search" autocomplete="off">
        <label for="search-input">Rechercher une adresse</label>
        <div class="search-row">
          <input id="search-input" type="text" placeholder="rechercher une adresse" aria-autocomplete="list" aria-controls="search-results" aria-expanded="false" />
          <button id="search-clear" type="button" title="Effacer" aria-label="Effacer">×</button>
        </div>
        <ul id="search-results" role="listbox" aria-label="Suggestions d'adresses (BAN)"></ul>
        <p id="search-help" class="help-text">Source : BAN — api-adresse.data.gouv.fr</p>
      </form>
    </div>

    <!-- Coordonnées (Étape 3) -->
    <div class="panel-coords" id="panel-coords" aria-live="polite">
      <span id="coords-text">Lat: 50.969000 | Lon: 2.436000 (WGS84)</span>
    </div>

    <!-- Zoom custom à droite, centré (Étape 2) -->
    <div class="zoom-right-center" id="zoom-custom">
      <button id="btn-zoom-in" class="btn-zoom" type="button" aria-label="Zoomer">+</button>
      <button id="btn-zoom-out" class="btn-zoom" type="button" aria-label="Dézoomer">−</button>
    </div>
	
	<!-- Étape 6 — barre d’outils (gauche) -->
	<div class="toolbar-left" id="toolbar-left" aria-label="Barre d'outils">
	<!-- Bouton : Gestionnaire de couches -->
		<button class="tool-btn" id="tool-layers" aria-pressed="false" title="Gestionnaire de couches">
			<svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="#444" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
				<path d="M12 3l9 5-9 5-9-5 9-5z"/><path d="M3 12l9 5 9-5"/><path d="M3 16l9 5 9-5"/>
			</svg>
		</button>
	</div>

	<!-- Étape 6 — panneau latéral gauche (contenu rempli plus tard) -->
	<div class="sidepanel" id="sidepanel" aria-hidden="true">
		<div class="sidepanel-header">
			<div class="sidepanel-title" id="sidepanel-title">liste des couches</div>
				<button class="panel-close" id="panel-close" aria-label="Fermer">×</button>
			</div>
			<div class="sidepanel-body" id="sidepanel-body"><!-- rendu dynamique à venir --></div>
		</div>
  </div>

  <!-- Librairies & scripts de l'app -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>
<script src="03-config.js" defer></script>
<script src="03-app.js" defer></script>
<!--ancien code de la version 0
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="03-config.js"></script>
  <script src="03-app.js"></script>-->
</body>
</html>